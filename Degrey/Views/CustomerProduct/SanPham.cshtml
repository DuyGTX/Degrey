@model IEnumerable<Degrey.Models.Product>

@{
    ViewBag.Title = "SanPham";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    <link href="~/Content/sanpham.css" rel="stylesheet" />
}
<div>
    @if (TempData["SuccessMessage"] != null)
    {
        <p style=" text-align: center;" class="alert alert-success">@TempData["SuccessMessage"]</p>
    }
</div>
<div class="main-content-product">
    <div class="breadcrumb-all">
        <div class="container" style="height:100%">
            <div class="wrap-breadcrumb">
                <ol class="breadcrumb-list">
                    <li><a href="/Home">Trang chủ</a></li>
                    <li style="color: #777777;">Tất cả sản phẩm</li>
                </ol>
            </div>
        </div>
    </div>
    


    <div class="banner">
        <div class="container">
            <img class="img-banner" src="https://file.hstatic.net/1000281824/file/cover_1_87a6ac90b1c94059a093003239175873.jpg" alt="Banner" />

        </div>

    </div>
    <div class="main-collection">
        <div class="collection-heading">
            <div class="container" style="height:68px;">
                <div class="wrap-heading">
                    <div class="row">
                        <div class=" col-md-9  col-sm-12 col-xs-12" style=" height: 100%;">
                            <h1 class="title">Tất cả sản phẩm</h1>
                        </div>
                        <div class="col-md-3 col-sm-12 col-xs-12">
                            <div class="sortbyfilter">
                                <div class="dropdown" id="productDropdown">
                                    <i class="fa fa-sort-alpha-asc icon-az"></i>
                                    <span style="font-weight: 600;"> Sắp xếp</span>
                                    <span class="triangle"></span>
                                    <div class="dropdown-content">
                                        <a>Sản phẩm nổi bật</a>
                                        <a>Giá: Tăng dần</a>
                                        <a>Giá: Giảm dần</a>
                                        <a>Tên: A-Z</a>
                                        <a>Tên: Z-A</a>
                                        <a>Cũ nhất</a>
                                        <a>Mới nhất</a>
                                        <a>Bán chạy nhất</a>
                                        <a>Tồn kho giảm dần</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="collection-filter">
            <div class="container" style="height:55.45px">
                <div class="wrap-filter">
                    <div class="filter-container">
                        <div class="title-filter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" fill="currentColor" class="bi bi-funnel" viewBox="0 0 16 16">
                                <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z" />
                            </svg>

                            <span style="font-weight: 600;">
                                BỘ LỌC
                            </span>
                        </div>
                        <div class="filter-all">
                            <div class="row">
                                <div class="filter-group col-md-3 col-sm-12  col-xs-12" style="font-weight: 500;line-height: 3;font-size: 14px;color: black;">
                                    <div class="sortbyfilter" style=" border: 0px;">
                                        <div class="dropdown" id="cartDropdown" style="margin-left: -34px; padding-left: 23px;">

                                            <span style="margin-left: 10px;">Lọc giá</span>
                                            <span class="icon" style="left: 191px;"></span>
                                            <div class="cartdropcontent dropdown-content" style="width: 196px; margin-top: -3px; margin-left: -5px; ">
                                                <div class="check-list">
                                                    <label>
                                                        <input type="checkbox" class="price-filter" value="0-100000">
                                                        Dưới 100.000₫
                                                    </label>
                                                    <label>
                                                        <input type="checkbox" class="price-filter" value="100000-250000">
                                                        100.000₫ - 250.000₫
                                                    </label>
                                                    <label>
                                                        <input type="checkbox" class="price-filter" value="250000-500000">
                                                        250.000₫ - 500.000₫
                                                    </label>
                                                    <label>
                                                        <input type="checkbox" class="price-filter" value="500000-800000">
                                                        500.000₫ - 800.000₫
                                                    </label>
                                                    <label>
                                                        <input type="checkbox" class="price-filter" value="800000">
                                                        Trên 800.000₫
                                                    </label>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="filter-group col-md-3 col-sm-12  col-xs-12" style="font-weight: 500;line-height: 3;font-size: 14px;color: black;">
                                    <span style="margin-left: 10px;">Màu sắc</span>
                                    <span class="icon"></span>
                                </div>
                                <div class="filter-group col-md-3 col-sm-12  col-xs-12" style="font-weight: 500;line-height: 3;font-size: 14px;color: black;">
                                    <span style="margin-left: 10px;">Kích thước</span>
                                    <span class="icon"></span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="collection-product">
            <div class="list-product" id="productList">
                <!-- Ô 1 -->
                @foreach (var sanpham in Model)
                {

                    <div class="cell" data-category="@sanpham.Category.NameCate">
                        <div class="image-container">
                            <a href="/CustomerProduct/ThongTinSP/@sanpham.ProID">
                                <img src="/Image/@sanpham.ProImage" alt="Hình ảnh 1">
                            </a>
                            <div class="detail">
                                <a href="/CustomerProduct/ThongTinSP/@sanpham.ProID">@sanpham.ProName</a>
                                <p class="price" style="margin-bottom: 8px;">
                                    @if (sanpham.PriceSale != null)
                                    {
                                        var formattedPrice = string.Format("{0:N0}₫", sanpham.PriceSale);
                                        <span class="amount"> @formattedPrice</span><del>@string.Format("{0:N0}₫", sanpham.Price)</del>
                                    }
                                    else
                                    {
                                        var formattedPrice = string.Format("{0:N0}₫", sanpham.Price);
                                        <span class="amount">@formattedPrice</span>
                                    }
                                </p>
                            </div>
                        </div>
                    </div>




                }

                <!-- Ô 2 -->


            </div>
            <a href="#" id="loadMore">Xem thêm sản phẩm</a>

        </div>

    </div>
</div>
<script>
    const productDropdown = document.getElementById("productDropdown");
    const productList = document.getElementById("productList");
    const sortSelect = productDropdown.querySelector(".dropdown-content");

    // Lắng nghe sự kiện khi người dùng chọn tùy chọn từ dropdown
    sortSelect.addEventListener("click", function (event) {
        if (event.target.tagName === "A") {
            const sortBy = event.target.textContent;
            const products = Array.from(productList.children);

            // Xác định cách sắp xếp dựa trên tùy chọn của người dùng
            if (sortBy === "Giá: Tăng dần") {
                products.sort((a, b) => {
                    const priceA = parseFloat(a.querySelector(".amount").textContent.replace("₫", "").replace(",", ""));
                    const priceB = parseFloat(b.querySelector(".amount").textContent.replace("₫", "").replace(",", ""));
                    return priceA - priceB;
                });
            } else if (sortBy === "Giá: Giảm dần") {
                products.sort((a, b) => {
                    const priceA = parseFloat(a.querySelector(".amount").textContent.replace("₫", "").replace(",", ""));
                    const priceB = parseFloat(b.querySelector(".amount").textContent.replace("₫", "").replace(",", ""));
                    return priceB - priceA;
                });
            }
            if (sortBy === "Tên: A-Z") {
                products.sort((a, b) => {
                    const nameA = a.querySelector(".detail a").textContent.toUpperCase();
                    const nameB = b.querySelector(".detail a").textContent.toUpperCase();
                    return nameA.localeCompare(nameB);
                });
            } else if (sortBy === "Tên: Z-A") {
                products.sort((a, b) => {
                    const nameA = a.querySelector(".detail a").textContent.toUpperCase();
                    const nameB = b.querySelector(".detail a").textContent.toUpperCase();
                    return nameB.localeCompare(nameA);
                });

            }
            if (sortBy === "Sản phẩm nổi bật") {
                products.sort((a, b) => {
                    const nameA = a.querySelector(".detail a").textContent.toUpperCase();
                    const nameB = b.querySelector(".detail a").textContent.toUpperCase();

                    const isBaloA = nameA.includes("BALO");
                    const isBaloB = nameB.includes("BALO");

                    if (isBaloA && !isBaloB) {
                        return -1;
                    } else if (!isBaloA && isBaloB) {
                        return 1;
                    }

                    return nameA.localeCompare(nameB);
                });
            }

            // Xóa toàn bộ sản phẩm khỏi danh sách
            while (productList.firstChild) {
                productList.removeChild(productList.firstChild);
            }

            // Thêm sản phẩm đã sắp xếp lại vào danh sách
            products.forEach(product => productList.appendChild(product));
        }
    });
    $(document).ready(function () {
        // Bắt sự kiện hover vào phần tử có ID "productDropdown"
        $("#productDropdown").hover(
            function () {
                // Khi con trỏ chuột nằm trên phần tử "productDropdown"
                // Hiển thị dropdown content
                $(".dropdown-content").show();
            },
            function () {
                // Khi con trỏ chuột ra khỏi phần tử "productDropdown"
                // Ẩn dropdown content
                $(".dropdown-content").hide();
            }
        );

        $("#cartDropdown").hover(
            function () {
                // Khi con trỏ chuột nằm trên phần tử "productDropdown"
                // Hiển thị dropdown content
                $(".cartdropcontent").show();
            },
            function () {
                // Khi con trỏ chuột ra khỏi phần tử "productDropdown"
                // Ẩn dropdown content
                $(".cartdropcontent").hide();
            }
        );
    });



</script>






s
